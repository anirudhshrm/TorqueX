# üöÄ Render Deployment Guide for TorqueX

## Quick Deploy (5-10 minutes)

### Step 1: Prepare Your Repository
1. Make sure all files are committed to your Git repository
2. Ensure you have the `render.yaml` file in your project root

### Step 2: Connect to Render
1. Go to [https://render.com](https://render.com)
2. Sign up or log in with your GitHub account
3. Click "New" ‚Üí "Blueprint"
4. Connect your GitHub repository containing TorqueX
5. Render will automatically detect the `render.yaml` file

### Step 3: Configure Services
Render will create three services based on your `render.yaml`:

1. **torquex-web** - Your main web application
2. **torquex-db** - PostgreSQL database
3. **torquex-redis** - Redis cache

### Step 4: Database Setup
After deployment, you need to run database migrations:

1. Go to your Render dashboard
2. Find the **torquex-web** service
3. Go to "Shell" tab
4. Run: `npm run prisma:migrate`
5. Run: `npm run setup:demo` (to create test users)

### Step 5: Access Your Application
Once deployed, Render will provide you with a URL like:
`https://torquex-web.onrender.com`

## üîß Manual Setup (Alternative)

If you prefer to set up services manually:

### Create PostgreSQL Database
1. In Render dashboard: "New" ‚Üí "PostgreSQL"
2. Name: `torquex-db`
3. Choose plan (Free tier available)
4. Copy the `DATABASE_URL`

### Create Redis Instance
1. In Render dashboard: "New" ‚Üí "Redis"
2. Name: `torquex-redis`
3. Choose plan (Free tier available)
4. Copy the `REDIS_URL`

### Create Web Service
1. In Render dashboard: "New" ‚Üí "Web Service"
2. Connect your GitHub repo
3. Configure:
   - **Runtime**: Node
   - **Build Command**: `npm install && npm run build`
   - **Start Command**: `npm run start:no-clerk`
4. Add Environment Variables:
   ```
   NODE_ENV=production
   SKIP_CLERK=true
   SESSION_SECRET=your-secret-key-here-min-32-chars
   ENCRYPTION_KEY=generate-64-char-hex-key
   DATABASE_URL=your-postgres-connection-string
   REDIS_URL=your-redis-connection-string
   PORT=10000
   ```

## üîê Environment Variables

### Required Variables
- `NODE_ENV=production`
- `SKIP_CLERK=true` (uses local authentication)
- `SESSION_SECRET` (auto-generated by Render)
- `ENCRYPTION_KEY` (auto-generated by Render)
- `DATABASE_URL` (from PostgreSQL service)
- `REDIS_URL` (from Redis service)
- `PORT=10000` (Render's default)

### Optional Variables (for full features)
- `STRIPE_PUBLISHABLE_KEY`
- `STRIPE_SECRET_KEY`
- `STRIPE_WEBHOOK_SECRET`
- `CLERK_PUBLISHABLE_KEY` (if using Clerk auth)
- `CLERK_SECRET_KEY` (if using Clerk auth)

## üìã Post-Deployment Steps

1. **Run Database Migrations**:
   ```bash
   # In Render shell or via API
   npm run prisma:migrate
   ```

2. **Create Test Users**:
   ```bash
   npm run setup:demo
   ```

3. **Verify Redis Connection**:
   ```bash
   npm run verify:redis
   ```

## üß™ Testing Your Deployment

1. Visit your Render URL
2. Try logging in with test credentials:
   - Admin: `admin@torquex.com` / `admin123`
   - User: `user@torquex.com` / `user123`

## üö® Troubleshooting

### Database Connection Issues
- Check your `DATABASE_URL` in environment variables
- Ensure PostgreSQL service is running
- Run `npm run prisma:migrate` in Render shell

### Redis Connection Issues
- Check your `REDIS_URL` in environment variables
- Ensure Redis service is running
- Run `npm run verify:redis` in Render shell

### Application Won't Start
- Check Render logs for error messages
- Ensure all required environment variables are set
- Verify `SKIP_CLERK=true` is set for local auth

### Build Failures
- Check that `prisma:generate` runs successfully
- Ensure all dependencies are listed in `package.json`

## üí° Tips

- **Free Tier**: Render offers free tiers for web services, PostgreSQL, and Redis
- **Auto-Deploy**: Enable auto-deploy on git push
- **Logs**: Monitor your application logs in the Render dashboard
- **Scaling**: Upgrade plans as your application grows

## üìû Support

If you encounter issues:
1. Check Render's documentation: https://docs.render.com/
2. Review application logs in Render dashboard
3. Test locally with `npm run start:no-clerk`