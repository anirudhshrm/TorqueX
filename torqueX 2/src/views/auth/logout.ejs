<%- include('../partials/header') %>

<div class="container mx-auto px-4 py-12">
  <div class="max-w-md mx-auto bg-white rounded-lg shadow-md p-8">
    <h1 class="text-3xl font-bold text-center mb-8">Logging Out...</h1>
    
    <div class="flex justify-center">
      <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div>
    </div>
    
    <p class="text-center mt-6 text-gray-600">Please wait while we log you out.</p>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Check for session-based authentication first
    // If using Clerk, wait for it to be loaded
    const checkClerk = setInterval(() => {
      if (typeof window.Clerk !== 'undefined') {
        clearInterval(checkClerk);
        console.log('Signing out with Clerk');
        
        // Sign out and redirect to homepage
        window.Clerk.signOut().then(() => {
          window.location.href = '/';
        }).catch(error => {
          console.error('Error signing out with Clerk:', error);
          window.location.href = '/';
        });
      }
    }, 100);
    
    // Fallback if Clerk doesn't load after 2 seconds
    // This will redirect to home page and rely on server-side session destruction
    setTimeout(() => {
      clearInterval(checkClerk);
      console.log('Fallback logout - redirecting to homepage');
      window.location.href = '/';
    }, 2000);
  });
</script>

<%- include('../partials/footer') %>